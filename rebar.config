%% -*- mode: Erlang; fill-column: 80; comment-column: 75; -*-
%% Dependencies ================================================================
{deps, [{erlware_commons, ".*",
         {git, "https://github.com/erlware/erlware_commons.git",
          {branch, "master"}}},
        {providers, ".*",
         {git, "https://github.com/tsloughter/providers.git",
          {tag, "v1.3.0"}}},
        {mustache, ".*",
         {git, "https://github.com/soranoba/mustache.git",
          {tag, "v0.3.0"}}},
        {getopt, "",
         {git, "https://github.com/jcomellas/getopt.git",
          {branch, "master"}}}]}.

{escript_incl_extra, [{"priv/templates/*", "."}]}.
{escript_emu_args, "%%! +sbtu +A0 -noinput\n"}.
{escript_incl_apps,
 [getopt, erlware_commons, providers, relx]}.

%% Compiler Options ============================================================
{erl_opts,
    [{platform_define, "^[0-9]+", namespaced_types},
     no_debug_info,
     warnings_as_errors,
     inline]}.

%% EUnit =======================================================================
{eunit_opts,
 [{report, {eunit_surefire, [{dir, "."}]}}]}.

%% Profiles ====================================================================

{profiles, [{dev, [{deps, [{neotoma, ".*",
                            {git, "https://github.com/seancribbs/neotoma.git", {branch, "master"}}}
                          ]}
                  ]},

            {test, [{erl_opts, [debug_info]}]}
           ]}.

{overrides, [{override, erlware_commons, [
                                         {erl_opts, [{platform_define, "^[0-9]+", namespaced_types},
                                                     {platform_define, "^R1[4|5]", deprecated_crypto},
                                                     no_debug_info,
                                                     warnings_as_errors
                                                    ]},
                                         {deps, []}, {plugins, []}
                                         ]},
            {override, mustache, [
                                 {erl_opts, [no_debug_info]},
                                 {deps, []}, {plugins, []}]},
            {override, getopt, [{erl_opts, [no_debug_info]}]},
            {override, providers, [{erl_opts, [no_debug_info]}]}
            ]}.

{ct_opts, [{cover_spec, "cover.spec"},
           {cover_enabled, true},
           {cover_print_enabled, true}]}.
